<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:pretty="http://ocpsoft.com/prettyfaces">

<body>
<f:metadata>
    <f:viewParam name="id" value="#{detailedEmail.selectedId}" />
    <f:viewParam name="mailinglist" value="#{detailedEmail.selectedMailinglist}" />
    <f:event type="preRenderView" listener="#{detailedEmail.load()}"/>   
    
</f:metadata>

	<ui:composition template="/templates/mainTemplate.xhtml">

		<ui:define name="content">

			<div style="font-size: 16px; margin-top: 30px;" id="email">
				<b>ID: </b>
				<h:outputLabel value="#{detailedEmail.email.id}" />
				<br /> <b>From: </b>
				<h:outputLabel value="#{detailedEmail.email.from}" />
				<br /> <b>Content: </b>
				
				<h:outputText value="${detailedEmail.email.mainContent[0].content}" style="white-space: pre;"/>
				<br />
				<br/>
				<p ><strong>Replies:</strong></p> <br/>
					<rich:dataGrid value="#{detailedEmail.replies}" style="border:none" var="reply"
						columns="3" border="0">
							<h:panelGrid >
							<h:form>
								<strong>ID:</strong>
								<pretty:link mappingId="email">
							        <f:param value="#{mailinglist}" />
									<f:param value="#{reply.id}" />
									<h:outputLabel value="#{reply.id}" />
								</pretty:link>
								
										</h:form>
								<h:outputText value="From: #{reply.from}"></h:outputText>
								<h:outputText value="#{reply.mainContent[0].getShorterContent(250)}"></h:outputText>...
							</h:panelGrid>
					</rich:dataGrid>
				


			</div>

		</ui:define>
	</ui:composition>
</body>
</html>
